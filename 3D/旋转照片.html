<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	 body{
            -webkit-perspective: 800px;
            -webkit-perspective-origin: 50% -90%;
        }

		#container{
			width: 125px;
			height: 125px;
			/*background-color: #f00;*/
			background-repeat: no-repeat;
			margin: 200px auto;
			-webkit-transform-style: preserve-3d;
			-webkit-transition: all 0.5s linear;
		}
		#container img{
			position: absolute;
			-webkit-transition: all 0.5s linear;
		}
	</style>
</head>
<body>
	<div id="container">
		
	</div>
	<script>
		var oContainer = document.querySelector('#container');
		var count = 0;
		var index = 0;

		for(var i = 0; i < 9; i++){
			var oImg = new Image();
			oImg.onload = function(){
				count++;
				if(count == 9){
					var aImg = oContainer.querySelectorAll('img');
					for(var i = 0;i < 9; i++){
						(function(idx){//闭包  内部函数调用外部函数的变量
						setTimeout(function(){
							aImg[idx].style.webkitTransform = 'rotateY('+ (9-idx) * 40 +'deg) translateZ(200px)';
					
						},(9 - idx)*100);
						})(i)
					}
					
				}
			};
			oImg.src = 'img/thumbs/'+ (i + 1) +'.jpg';
			oContainer.appendChild(oImg);
		}

		oContainer.addEventListener('click' , function(){
			index++;
			oContainer.style.transform = 'rotateY('+ index*40 +'deg)'
		});
	</script>
</body>
</html>